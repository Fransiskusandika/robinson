box: wercker/php
build:
  steps:
    - script:
        name: install phalconphp
        code: |-
            git clone -q --depth=1 https://github.com/phalcon/cphalcon.git -b 1.2.5
            cd cphalcon/ext;
            export CFLAGS="-g3 -O1 -fno-delete-null-pointer-checks -Wall";
            phpize && ./configure --enable-phalcon && make -j4 && sudo make install
            phpenv config-add project-config.ini
            phpenv rehash
        name: show extensions
        code: |-
            composer show --platform
    - script:
        name: PHPUnit integration tests
        code: phpunit --configuration phpunit.xml